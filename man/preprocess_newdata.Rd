% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.R
\name{preprocess_newdata}
\alias{preprocess_newdata}
\title{Preprocess new data to match training features}
\usage{
preprocess_newdata(df_raw, preproc, top_features)
}
\arguments{
\item{df_raw}{A data.frame with raw patient features.}

\item{preproc}{Preprocessing metadata stored inside \code{heart_model_object}.
This is created during model training and includes numeric/factor columns,
medians, factor levels and near-zero-variance columns.}

\item{top_features}{Character vector of feature names used by the RF model.}
}
\description{
\code{preprocess_newdata()} mirrors the preprocessing steps used during
model training, so that new patient data can be safely passed into
the pre-trained Random Forest model.
}
\details{
The function performs the following steps:
\itemize{
\item Rename Kaggle-style columns to cleaned names (via
\code{\link[=rename_heart_cols]{rename_heart_cols()}})
\item Add engineered features (\code{age_decade}, \code{high_bp_flag},
\code{high_chol_flag}) via \code{\link[=add_engineered_features]{add_engineered_features()}}
\item Drop the label column \code{HeartDisease} if present
\item Ensure all training-time numeric and factor columns exist
\item Convert numeric columns and impute missing values using the
medians stored in \code{preproc$num_medians}
\item Encode factor columns using training-time levels, mapping
unseen/NA to \code{"Unknown"}
\item Remove near-zero-variance columns
\item Finally select only the features used by the RF model
}

This is an internal helper and is not intended to be called directly
by end users.
}
\keyword{internal}
