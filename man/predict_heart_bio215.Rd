% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main.R
\name{predict_heart_bio215}
\alias{predict_heart_bio215}
\title{Heart disease risk prediction from clinical features}
\usage{
predict_heart_bio215(
  newdata,
  type = c("class", "prob"),
  positive_threshold = NULL
)
}
\arguments{
\item{newdata}{A data.frame of patient features. At minimum, the following
variables are recommended (Kaggle-style or cleaned names are both accepted):
\itemize{
\item \code{Age}
\item \code{Sex}
\item \code{BP}
\item \code{Cholesterol}
\item \code{Chest pain type} or \code{ChestPainType}
\item \code{Max HR} or \code{MaxHR}
\item \code{Exercise angina} or \code{ExerciseAngina}
\item \code{ST depression} or \code{ST_depression}
}
Additional columns from the original Kaggle dataset are allowed.}

\item{type}{Either \code{"class"} (default) to return a factor vector
(\code{"Absence"} / \code{"Presence"}), or \code{"prob"} to return
a numeric vector of probabilities.}

\item{positive_threshold}{Optional probability threshold; if \code{NULL},
the training-time threshold stored in \code{heart_model_object$best_threshold}
is used.}
}
\value{
A vector of predicted classes or probabilities:
\itemize{
\item If \code{type = "class"} (default), a factor with levels
\code{c("Absence", "Presence")}.
\item If \code{type = "prob"}, a numeric vector of probabilities of
\code{"Presence"}.
}
}
\description{
\code{predict_heart_bio215()} is the \strong{main user-facing function} of the
\pkg{heartPrediction} package. It applies the final top-10-feature
Random Forest model developed in the BIO215 capstone project to new
patient data and returns heart disease predictions.

The function is designed to be a simple, high-level interface:
users provide a \code{data.frame} of routine clinical variables
(age, blood pressure, cholesterol, chest pain type, exercise test
results, etc.), and the function returns either:

\itemize{
\item binary class labels: \code{"Absence"} vs \code{"Presence"}
of heart disease, or
\item predicted probabilities of \code{"Presence"}
}

It supports both the original Kaggle-style column names
(e.g. \code{BP}, \code{Chest pain type}, \code{ST depression}) and the
cleaned internal names used during model training, so that the same
function can be used directly on the Kaggle CSV, on data exported from
the Shiny web app, or on external datasets with similar structure.

Importantly, this function is exactly the one required by the BIO215
rubric: it takes a feature table as input and returns predicted
classes for a classification task, using the same trained model as the
Shiny application.
}
\details{
Internally, the function:
\enumerate{
\item Renames Kaggle columns to cleaned names (via \code{\link[=rename_heart_cols]{rename_heart_cols()}})
\item Adds engineered features (\code{age_decade}, \code{high_bp_flag},
\code{high_chol_flag})
\item Aligns numeric columns and imputes missing values using the training
medians stored in \code{heart_model_object$preproc}
\item Aligns factor columns to the training-time levels, mapping unseen
categories to \code{"Unknown"}
\item Removes near-zero-variance features
\item Selects the top-10 features used by the final Random Forest model
\item Computes predicted probabilities of \code{"Presence"}
\item Converts probabilities to class labels using the decision threshold
chosen on the test set during model development
}

By default, the function returns only the predicted classes
(factor with levels \code{c("Absence", "Presence")}), which matches the
BIO215 marking rubric for classification tasks. Optionally, users can
request predicted probabilities instead via \code{type = "prob"}.
}
\section{BIO215 compliance}{

This function is explicitly designed to:
\itemize{
\item Take a \code{data.frame} of patient features as input
\item Return predicted class labels for a binary classification task
\item Use the same trained model as the associated Shiny web app
}
}

\examples{
\dontrun{
new_patients <- data.frame(
  Age               = c(54, 63),
  Sex               = c("M", "F"),
  BP                = c(140, 120),
  Cholesterol       = c(289, 250),
  `Chest pain type` = c("ATA", "NAP"),
  `Max HR`          = c(150, 132),
  `Exercise angina` = c("N", "Y"),
  `ST depression`   = c(1.5, 2.3)
)

# Predicted classes (Absence/Presence):
predict_heart_bio215(new_patients)

# Predicted probabilities of Presence:
predict_heart_bio215(new_patients, type = "prob")
}

}
\seealso{
\code{\link[=predict_heart_multiple]{predict_heart_multiple()}}, \code{\link[=predict_heart_single]{predict_heart_single()}}
}
